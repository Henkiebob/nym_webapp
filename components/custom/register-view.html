<link rel="import" href="../core-animated-pages/core-animated-pages.html">
<link rel="import" href="../core-animated-pages/transitions/slide-from-right.html">
<link rel="import" href="../core-icons/core-icons.html">
<link rel="import" href="../core-icon-button/core-icon-button.html">
<link rel="import" href="../core-animation/core-animation.html">
<link rel="import" href="../core-collapse/core-collapse.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-toast/paper-toast.html">
<link rel="import" href="../core-toolbar/core-toolbar.html">

<link rel="import" href="../custom/new-user.html">

<polymer-element name="register-view">
  <template>

    <core-ajax id="addHouse"
      auto="false"
      url="http://localhost:3000/api/houses"
      on-core-response="{{houseAdded}}"
      handleAs="json"
      method="POST">
    </core-ajax>


    <core-ajax id="addUsers"
      auto="false"
      on-core-response="{{usersAdded}}"
      handleAs="json"
      method="PUT">
    </core-ajax>

    <core-animated-pages id="pages" selected="0" transitions="slide-from-right">
      <div>
        <h1>Registreren stap 1</h1>

          <form class="file-form" method="post" enctype="multipart/form-data">
                <div class="filebutton">Upload een groepsfoto
                <input type="file" class="file" name="house[avatar]">
                </div>
               <input type="text" value="{{housename}}" placeholder="Groepsnaam" class="groepsnaam">
               <input type="password" value="{{housepassword}}" placeholder="Groepswachtwoord" class="groepswachtwoord">
               <input type="password" name="house[password_confirmation]" placeholder="Groepswachtwoord" class="groepswachtwoord">
               <span>Iets wat iedereen makkelijk kan onthouden, zoals het wifi wachtwoord.</span>
          </form>



          <p on-tap="{{SubmitHouse}}">Volgende</p>
      </div>

      <div>
      <h1>Registeren stap 2</h1>
        <template repeat="{{user, userIndex in users}}">
          <new-user name="{{user.name}}" email="{{user.email}}" user_position="{{userIndex}}" on-show-users="{{showUsers}}"></new-user>
        </template>

        <p on-tap="{{submit}}">Knop</p>

        <p on-tap="{{addNewUser}}">Nieuw</p>
        <paper-button on-tap="{{addUsersToHouse}}">Ga!</paper-button>

      </div>


      <div></div>
    </core-animated-pages>

  </template>

  <script type="text/javascript" src="js/register-view.js"></script>
</polymer-element>
