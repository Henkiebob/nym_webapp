<link rel="import" href="../core-animated-pages/core-animated-pages.html">
<link rel="import" href="../core-animated-pages/transitions/slide-from-right.html">
<link rel="import" href="../core-icons/core-icons.html">
<link rel="import" href="../core-icon-button/core-icon-button.html">
<link rel="import" href="../core-animation/core-animation.html">
<link rel="import" href="../core-collapse/core-collapse.html">
<link rel="import" href="../paper-tabs/paper-tabs.html">
<link rel="import" href="../paper-slider/paper-slider.html">
<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-radio-group/paper-radio-group.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-toast/paper-toast.html">
<link rel="import" href="../core-toolbar/core-toolbar.html">
<link rel="import" href="../custom/single-user.html">
<link rel="import" href="single-task-settings.html">

<script src="../../lib/sweet-alert.min.js"></script>
<link rel="stylesheet" type="text/css" href="../../lib/sweet-alert.css">

<polymer-element name="settings-view">
	<template>
  <link rel="stylesheet" type="text/css" href="style/settings-view.css">
		<core-ajax id="ajaxGetTasks"
            auto="false"
            url="http://178.62.205.200/api/tasks"
            on-core-response="{{tasksLoaded}}"
            handleAs="json"
            method="GET">
		</core-ajax>

    <core-ajax id="updateTask"
      auto="false"
      on-core-response="{{taskUpdated}}"
      handleAs="json"
      method="PUT">
    </core-ajax>

    <core-ajax id="addTask"
      auto="false"
      on-core-response="{{taskAdded}}"
      handleAs="json"
      method="POST">
    </core-ajax>

    <core-ajax id="deleteTask"
      auto="false"
      on-core-response="{{taskDeleted}}"
      handleAs="json"
      method="DELETE">
    </core-ajax>

    <core-toolbar>
        <core-icon icon="home" on-tap="{{goBack}}"></core-icon>
        <div flex>{{toolbarname}}</div>
        <core-icon icon="add" on-tap="{{newTask}}" id="addBtn"></core-icon>
    </core-toolbar>

		<core-animated-pages id="pages" selected="0" transitions="slide-from-right">
			<div>
        <template repeat="{{task in tasks}}">
            <single-task-settings name="{{task.name}}" points="{{task.points}}" deadline="{{task.deadline}}" task_id="{{task.id}}" on-delete-task="{{deleteTask}}" on-update-task="{{updateTask}}"></single-task>
        </template>
			</div>

			<div>
        <div class="task-form">
            <paper-input-decorator label="Taaknaam">
                <input type="text" value="{{newTaskName}}" id="name">
            </paper-input-decorator>

            <paper-radio-group id="radio" selected="1">
                <paper-radio-button name="1" label="Elke dag"></paper-radio-button>
                <paper-radio-button name="7" label="Elke week"></paper-radio-button>
                <paper-radio-button name="28" label="Elke maand"></paper-radio-button>
            </paper-radio-group>

            <paper-button raised on-tap="{{addTask}}">Opslaan</paper-button>

            <paper-button on-tap="{{newTask}}">Annuleren</paper-button>
        </div>
			</div>

    <div>
      <single-user id="{{me.id}}" name="{{me.name}}" name_ext=" (ik)" avatar="{{me.avatar}}" email="{{me.email}}" on-edit-user="{{editUser}}"></single-user>

      <div class="seperator"></div>

      <template repeat="{{user in group}}">
      <single-user id="{{user.id}}" name="{{user.name}}" avatar="{{user.avatar}}" email="{{user.email}}" on-edit-user="{{editUser}}"></single-user>
      </template>

      <div class="seperator"></div>
      <paper-button raised on-tap="{{switchUser}}"><core-icon icon="cached"></core-icon> Gebruiker wisselen</paper-button>
      <paper-button raised on-tap="{{logOut}}"><core-icon icon="exit-to-app"></core-icon> Uitloggen</paper-button>
    </div>

      <div>
        <div class="task-form">
          <paper-input-decorator label="Username">
            <input type="text" value="{{editUsername}}" id="name">
          </paper-input-decorator>

          <paper-button raised on-tap="{{updateUser}}">Opslaan</paper-button>
          <paper-button on-tap="{{updateUser}}">Annuleren</paper-button>
        </div>
      </div>
		</core-animated-pages>

		<paper-tabs selected="0" noink="true">
			<paper-tab on-tap="{{showTakskManager}}"><core-icon icon="assignment"></core-icon> Taakbeheer</paper-tab>
			<paper-tab on-tap="{{showUsersManager}}"><core-icon icon="account-circle"></core-icon> Gebruikers</paper-tab>
		</paper-tabs>

	</template>
    <script type="text/javascript" src="js/settings-view.js"></script>
</polymer-element>
